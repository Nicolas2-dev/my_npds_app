/*
    App 2001 - 2022
    Tinymce V6.2.0 implémentation
*/
(function() {
tinymce.PluginManager.requireLangPack("App"),tinymce.PluginManager.add('App', 

function(editor,url) {
   editor.ui.registry.addMenuButton('App_langue', {
      tooltip: tinymce.translate('App_what_desc'),
      icon:'Applang',
      fetch: function (callback) {
         var items = [
            {
               type: 'menuitem',
               text: tinymce.translate('App_all_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[french] [/french]&nbsp;[english] [/english]&nbsp;[spanish] [/spanish]&nbsp;[german] [/german]&nbsp;[chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_french_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[french] [/french]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_frenchonly_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[!french] [/french]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_english_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[english] [/english]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_englishonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!english] [/english]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_spanish_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[spanish] [/spanish]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_spanishonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!spanish] [/spanish]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_chinese_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_chineseonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_german_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[german] [/german]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('App_germanonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!german] [/german]&nbsp;');
               }
            }
         ]
         callback(items);
      }
   }),

   editor.ui.registry.addButton('App_img', {
      icon : 'Appimag',
      tooltip : tinymce.translate('App_img_desc'),
      onAction : function () {
         App_img();
      },
   });
   var App_img = function () {
      return editor.windowManager.openUrl({
         title : tinymce.translate('App_img_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-public',
         width : 550,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      },
      {
          plugin_url : url, // Plugin absolute URL
       });
    };

   editor.ui.registry.addButton('App_perso', {
      icon : 'Appperso',
      tooltip : tinymce.translate('App_perso_desc'),
      onAction : function () {
         App_perso();
      },
   });
   var App_perso = function () {
      return editor.windowManager.openUrl({
         title : tinymce.translate('App_perso_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-membre',
         width : 550,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };

   var App_Mns = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('App_mns_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=minisite-lec',
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('App_mns', {
      icon: 'Appmns',
      tooltip : tinymce.translate('App_mns_desc'),
      onAction : function () {
         App_Mns();
      },
   });


   var App_Upl = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('App_upl_desc'),
         url : 'modules.php?ModPath=upload&ModStart=include_editeur/upload_editeur2&apli=editeur',
         width : 550,
         height : 250,
         resizable : 'yes',
         scrollbars : 'no',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('App_upl', {
      icon : 'Appupload',
      tooltip : tinymce.translate('App_upl_desc'),
      onAction : function () {
         App_Upl();
      },
   });

//==> réservé à des contextes ou UN groupe existe dans les paramètres (ex : wspad) donc ne pas utiliser dans le context commun
   var App_Gupl = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('App_upl_groupe'),
         url : 'modules.php?ModPath=upload&ModStart=include_editeur/upload_editeur2&apli=editeur'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 350,
         height : 300,
         resizable : 'yes',
         scrollbars : 'no',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('App_gupl', {
      tooltip : tinymce.translate('App_upl_groupe'),
      icon : 'Appupload',
      onAction : function () {
         App_Gupl();
      },
   });
   
   var App_GMns = function (tiny_mce_groupe) {
      editor.windowManager.openUrl({
         title : 'Minisite du groupe',
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=minisite-lec-groupe'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('App_gmns', {
      icon: 'Appmns',
      tooltip : tinymce.translate('App_mns_desc'),
      onAction : function () {
         App_GMns();
      },
   });

   editor.ui.registry.addButton('App_gperso', {
      icon:'Appperso',
      tooltip : tinymce.translate('App_perso_desc'),
      onAction : function () {
         App_GPerso();
      },
   });
   var App_GPerso = function () {
      return editor.windowManager.openUrl({
         title : 'Groupe : images et documents',
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-groupe'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
// <== réservé à des contextes ou UN groupe existe dans les paramètres (ex : wspad) donc ne pas utiliser dans le context commun


   editor.ui.registry.addButton('App_metal', {
      tooltip : tinymce.translate('App_metal_desc'),
      icon: 'Appmeta',
      onAction : function () {
         App_MetaL();
      },
   });
   var App_MetaL = function () {
      editor.windowManager.openUrl({
         title : 'METAMOT App',
         url : 'modules.php?ModPath=meta-lang&ModStart=adv-meta_lang-doc',
         width : 700,
         height : 400,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   
})
})
();